(function(h,R){typeof exports=="object"&&typeof module!="undefined"?R(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],R):(h=typeof globalThis!="undefined"?globalThis:h||self,R(h.ReactFederatedJourney={},h.React,h.ReactDOM))})(this,function(h,R,j){"use strict";var hi=Object.defineProperty;var mi=(h,R,j)=>R in h?hi(h,R,{enumerable:!0,configurable:!0,writable:!0,value:j}):h[R]=j;var _=(h,R,j)=>(mi(h,typeof R!="symbol"?R+"":R,j),j);function Ze(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function Gt(e){if(e&&e.__esModule)return e;var t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});return e&&Object.keys(e).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var et=Ze(R),De=Gt(R),Kt=Ze(j),fe="?";function G(e){var t=[],r=Me(e,"stack");return r&&r.split(`
`).forEach(function(n){var o=$t(n)||Wt(n)||zt(n);o&&(!o.func&&o.line&&(o.func=fe),t.push(o))}),{message:Me(e,"message"),name:Me(e,"name"),stack:t}}var Ht=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Ft=/\((\S*)(?::(\d+))(?::(\d+))\)/;function $t(e){var t=Ht.exec(e);if(!!t){var r=t[2]&&t[2].indexOf("native")===0,n=t[2]&&t[2].indexOf("eval")===0,o=Ft.exec(t[2]);return n&&o&&(t[2]=o[1],t[3]=o[2],t[4]=o[3]),{args:r?[t[2]]:[],column:t[4]?+t[4]:void 0,func:t[1]||fe,line:t[3]?+t[3]:void 0,url:r?void 0:t[2]}}}var Vt=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function Wt(e){var t=Vt.exec(e);if(!!t)return{args:[],column:t[4]?+t[4]:void 0,func:t[1]||fe,line:+t[3],url:t[2]}}var Yt=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,Jt=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function zt(e){var t=Yt.exec(e);if(!!t){var r=t[3]&&t[3].indexOf(" > eval")>-1,n=Jt.exec(t[3]);return r&&n&&(t[3]=n[1],t[4]=n[2],t[5]=void 0),{args:t[2]?t[2].split(","):[],column:t[5]?+t[5]:void 0,func:t[1]||fe,line:t[4]?+t[4]:void 0,url:t[3]}}}function Me(e,t){if(!(typeof e!="object"||!e||!(t in e))){var r=e[t];return typeof r=="string"?r:void 0}}var X=1e3,q=60*X,Xt=60*q,de=1024;function qt(e,t,r){var n=r&&r.leading!==void 0?r.leading:!0,o=r&&r.trailing!==void 0?r.trailing:!0,i=!1,s,a;return{throttled:function(){for(var c=[],f=0;f<arguments.length;f++)c[f]=arguments[f];if(i){s=c;return}n?e.apply(void 0,c):s=c,i=!0,a=setTimeout(function(){o&&s&&e.apply(void 0,s),i=!1,s=void 0},t)},cancel:function(){clearTimeout(a),i=!1,s=void 0}}}function M(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.forEach(function(n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}),e}function Qt(e){return M({},e)}function K(e){return e?(parseInt(e,10)^Math.random()*16>>parseInt(e,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,K)}function tt(e){return e!==0&&Math.random()*100<=e}function rt(){}function pe(e,t,r){if(e==null)return JSON.stringify(e);var n=[!1,void 0];nt(e)&&(n=[!0,e.toJSON],delete e.toJSON);var o=[!1,void 0],i;typeof e=="object"&&(i=Object.getPrototypeOf(e),nt(i)&&(o=[!0,i.toJSON],delete i.toJSON));var s;try{s=JSON.stringify(e,t,r)}catch{s="<error: unable to serialize object>"}finally{n[0]&&(e.toJSON=n[1]),o[0]&&(i.toJSON=o[1])}return s}function nt(e){return typeof e=="object"&&e!==null&&Object.prototype.hasOwnProperty.call(e,"toJSON")}function Q(e,t){return e.indexOf(t)!==-1}function Zt(e,t){for(var r=0;r<e.length;r+=1){var n=e[r];if(t(n,r,e))return n}}function ot(e){return er(e)&&e>=0&&e<=100}function er(e){return typeof e=="number"}function Z(e){return Object.keys(e).map(function(t){return e[t]})}function tr(e){return Object.keys(e).map(function(t){return[t,e[t]]})}function rr(e){return Object.keys(e).length===0}function nr(e,t){return e.slice(0,t.length)===t}function Ue(){if(typeof globalThis=="object")return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var e=_dd_temp_;return delete Object.prototype._dd_temp_,typeof e!="object"&&(typeof self=="object"?e=self:typeof window=="object"?e=window:e={}),e}function or(){return ir(window.location)}function ir(e){if(e.origin)return e.origin;var t=e.host.replace(/(:80|:443)$/,"");return"".concat(e.protocol,"//").concat(t)}function sr(e,t){var r=new RegExp("(?:^|;)\\s*".concat(t,"\\s*=\\s*([^;]+)")),n=r.exec(e);return n?n[1]:void 0}function ar(e,t,r){r===void 0&&(r="");var n=e.charCodeAt(t-1),o=n>=55296&&n<=56319,i=o?t+1:t;return e.length<=i?e:"".concat(e.slice(0,i)).concat(r)}function ee(e,t,r,n){return it(e,[t],r,n)}function it(e,t,r,n){var o=n===void 0?{}:n,i=o.once,s=o.capture,a=o.passive,c=m(i?function(l){d(),r(l)}:r),f=a?{capture:s,passive:a}:s;t.forEach(function(l){return e.addEventListener(l,c,f)});var d=function(){return t.forEach(function(l){return e.removeEventListener(l,c,f)})};return{stop:d}}function cr(e){return e===null?"null":Array.isArray(e)?"array":typeof e}function ur(){if(typeof WeakSet!="undefined"){var e=new WeakSet;return{hasAlreadyBeenSeen:function(r){var n=e.has(r);return n||e.add(r),n}}}var t=[];return{hasAlreadyBeenSeen:function(r){var n=t.indexOf(r)>=0;return n||t.push(r),n}}}function ve(e,t,r){if(r===void 0&&(r=ur()),t===void 0)return e;if(typeof t!="object"||t===null)return t;if(t instanceof Date)return new Date(t.getTime());if(t instanceof RegExp){var n=t.flags||[t.global?"g":"",t.ignoreCase?"i":"",t.multiline?"m":"",t.sticky?"y":"",t.unicode?"u":""].join("");return new RegExp(t.source,n)}if(!r.hasAlreadyBeenSeen(t)){if(Array.isArray(t)){for(var o=Array.isArray(e)?e:[],i=0;i<t.length;++i)o[i]=ve(o[i],t[i],r);return o}var s=cr(e)==="object"?e:{};for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(s[a]=ve(s[a],t[a],r));return s}}function Ae(e){return ve(void 0,e)}function he(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r,n=0,o=e;n<o.length;n++){var i=o[n];i!=null&&(r=ve(r,i))}return r}function lr(e){var t=[];return e.forEach(function(r){return t.push(r)}),t}function fr(e){var t=new Set;return e.forEach(function(r){return t.add(r)}),lr(t)}function st(e,t,r){var n=e[t],o=r(n),i=function(){return o.apply(this,arguments)};return e[t]=i,{stop:function(){e[t]===i?e[t]=n:o=n}}}function W(e,t,r){var n=r.before,o=r.after;return st(e,t,function(i){return function(){var s=arguments,a;return n&&H(n,this,s),typeof i=="function"&&(a=i.apply(this,s)),o&&H(o,this,s),a}})}var dr=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function pr(e){var t=vr(e).stop,r=hr(e).stop;return{stop:function(){t(),r()}}}function vr(e){return W(window,"onerror",{before:function(t,r,n,o,i){var s;if(i)s=G(i),e(s,i);else{var a={url:r,column:o,line:n},c,f=t;if({}.toString.call(t)==="[object String]"){var d=dr.exec(f);d&&(c=d[1],f=d[2])}s={name:c,message:typeof f=="string"?f:void 0,stack:[a]},e(s,t)}}})}function hr(e){return W(window,"onunhandledrejection",{before:function(t){var r=t.reason||"Empty reason",n=G(r);e(n,r)}})}var T={AGENT:"agent",CONSOLE:"console",CUSTOM:"custom",LOGGER:"logger",NETWORK:"network",SOURCE:"source",REPORT:"report"};function mr(e,t,r,n){return!e||e.message===void 0&&!(t instanceof Error)?{message:"".concat(r," ").concat(pe(t)),stack:"No stack, consider using an instance of Error",handlingStack:n,type:e&&e.name}:{message:e.message||"Empty message",stack:Y(e),handlingStack:n,type:e.name}}function Y(e){var t=at(e);return e.stack.forEach(function(r){var n=r.func==="?"?"<anonymous>":r.func,o=r.args&&r.args.length>0?"(".concat(r.args.join(", "),")"):"",i=r.line?":".concat(r.line):"",s=r.line&&r.column?":".concat(r.column):"";t+=`
  at `.concat(n).concat(o," @ ").concat(r.url).concat(i).concat(s)}),t}function Er(e){var t;return(t=/@ (.+)/.exec(e))===null||t===void 0?void 0:t[1]}function at(e){return"".concat(e.name||"Error",": ").concat(e.message)}function yr(){var e=2,t=new Error,r;if(!t.stack)try{throw t}catch{}return H(function(){var n=G(t);n.stack=n.stack.slice(e),r=Y(n)}),r}var C=function(){function e(t){this.onFirstSubscribe=t,this.observers=[]}return e.prototype.subscribe=function(t){var r=this;return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe()||void 0),this.observers.push(t),{unsubscribe:function(){r.observers=r.observers.filter(function(n){return t!==n}),!r.observers.length&&r.onLastUnsubscribe&&r.onLastUnsubscribe()}}},e.prototype.notify=function(t){this.observers.forEach(function(r){return r(t)})},e}();function ct(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=new C(function(){var n=e.map(function(o){return o.subscribe(function(i){return r.notify(i)})});return function(){return n.forEach(function(o){return o.unsubscribe()})}});return r}function I(){return Date.now()}function te(){return performance.now()}function me(){return{relative:te(),timeStamp:I()}}function gr(){return{relative:0,timeStamp:lt()}}function ut(e,t){return t-e}function Or(e){return e-lt()}var Ne;function lt(){return Ne===void 0&&(Ne=performance.timing.navigationStart),Ne}var br=globalThis&&globalThis.__spreadArray||function(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},_r=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","http://localhost","<anonymous>"],Rr=[Kr],P={maxEventsPerPage:0,sentEventCount:0,telemetryEnabled:!1},Ee;function Tr(e){var t,r=new C;P.telemetryEnabled=tt(e.telemetrySampleRate),Ee=function(o){!Q(Rr,e.site)&&P.telemetryEnabled&&r.notify(n(o))},M(P,{maxEventsPerPage:e.maxTelemetryEventsPerPage,sentEventCount:0});function n(o){return he({type:"telemetry",date:I(),service:"browser-sdk",version:"4.11.1",source:"browser",_dd:{format_version:2},telemetry:o},t!==void 0?t():{})}return{setContextProvider:function(o){t=o},observable:r}}function Sr(e){return e.site===Gr}function wr(e,t,r){var n=r.value;r.value=function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var s=Ee?m(n):n;return s.apply(this,o)}}function m(e){return function(){return H(e,this,arguments)}}function H(e,t,r){try{return e.apply(t,r)}catch(n){Ce(S.error,n);try{ft(n)}catch(o){Ce(S.error,o)}}}function Lr(e,t){Ce(S.debug,e,t),dt(M({message:e,status:"debug"},t))}function ft(e){dt(M({status:"error"},Dr(e)))}function dt(e){Ee&&P.sentEventCount<P.maxEventsPerPage&&(P.sentEventCount+=1,Ee(e))}function Dr(e){if(e instanceof Error){var t=G(e);return{error:{kind:t.name,stack:Y(Mr(t))},message:t.message}}return{error:{stack:"Not an instance of error"},message:"Uncaught ".concat(pe(e))}}function Mr(e){return e.stack=e.stack.filter(function(t){return!t.url||_r.some(function(r){return nr(t.url,r)})}),e}function Ur(e){P.debugMode=e}function Ce(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];P.debugMode&&O.apply(void 0,br([e,"[TELEMETRY]"],t,!1))}var S={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},Ie={};function Ar(e){var t=e.map(function(r){return Ie[r]||(Ie[r]=Nr(r)),Ie[r]});return ct.apply(void 0,t)}function Nr(e){var t=new C(function(){var r=console[e];return console[e]=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];r.apply(console,n);var i=yr();H(function(){t.notify(Cr(n,e,i))})},function(){console[e]=r}});return t}function Cr(e,t,r){var n=e.map(function(s){return Ir(s)}).join(" "),o;if(t===S.error){var i=Zt(e,function(s){return s instanceof Error});o=i?Y(G(i)):void 0,n="console error: ".concat(n)}return{api:t,message:n,stack:o,handlingStack:r}}function Ir(e){return typeof e=="string"?e:e instanceof Error?at(G(e)):pe(e,void 0,2)}var O=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];Object.prototype.hasOwnProperty.call(S,e)||(e=S.log),O[e].apply(O,t)};O.debug=console.debug.bind(console),O.log=console.log.bind(console),O.info=console.info.bind(console),O.warn=console.warn.bind(console),O.error=console.error.bind(console);var pt=X;function re(e,t,r,n){var o=new Date;o.setTime(o.getTime()+r);var i="expires=".concat(o.toUTCString()),s=n&&n.crossSite?"none":"strict",a=n&&n.domain?";domain=".concat(n.domain):"",c=n&&n.secure?";secure":"";document.cookie="".concat(e,"=").concat(t,";").concat(i,";path=/;samesite=").concat(s).concat(a).concat(c)}function F(e){return sr(document.cookie,e)}function vt(e,t){re(e,"",0,t)}function Br(e){if(document.cookie===void 0||document.cookie===null)return!1;try{var t="dd_cookie_test_".concat(K()),r="test";re(t,r,X,e);var n=F(t)===r;return vt(t,e),n}catch(o){return O.error(o),!1}}var Be;function Pr(){if(Be===void 0){for(var e="dd_site_test_".concat(K()),t="test",r=window.location.hostname.split("."),n=r.pop();r.length&&!F(e);)n="".concat(r.pop(),".").concat(n),re(e,t,X,{domain:n});vt(e,{domain:n}),Be=n}return Be}function ht(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];try{return e.apply(void 0,r)}catch(o){O.error(t,o)}}}var ne;function xr(e){!Array.isArray(e)||(ne||(ne=new Set(e)),e.filter(function(t){return typeof t=="string"}).forEach(function(t){ne.add(t)}))}function mt(e){return!!ne&&ne.has(e)}function Pe(e){return kr(e,or()).href}function kr(e,t){if(jr())return t!==void 0?new URL(e,t):new URL(e);if(t===void 0&&!/:/.test(e))throw new Error("Invalid URL: '".concat(e,"'"));var r=document,n=r.createElement("a");if(t!==void 0){r=document.implementation.createHTMLDocument("");var o=r.createElement("base");o.href=t,r.head.appendChild(o),r.body.appendChild(n)}return n.href=e,n}var J;function jr(){if(J!==void 0)return J;try{var e=new URL("http://test/path");return J=e.href==="http://test/path",J}catch{J=!1}return J}var Gr="datad0g.com",xe="datadoghq.com",Kr="ddog-gov.com",Hr={logs:"logs",rum:"rum",sessionReplay:"session-replay"},Fr={logs:"logs",rum:"rum",sessionReplay:"replay"};function oe(e,t,r){var n=e.site,o=n===void 0?xe:n,i=e.clientToken,s=o.split("."),a=s.pop(),c="".concat(Hr[t],".browser-intake-").concat(s.join("-"),".").concat(a),f="https://".concat(c,"/api/v2/").concat(Fr[t]),d=e.proxyUrl&&Pe(e.proxyUrl);return{build:function(){var l="ddsource=browser"+"&ddtags=".concat(encodeURIComponent(["sdk_version:".concat("4.11.1")].concat(r).join(",")))+"&dd-api-key=".concat(i)+"&dd-evp-origin-version=".concat(encodeURIComponent("4.11.1"))+"&dd-evp-origin=browser"+"&dd-request-id=".concat(K());t==="rum"&&(l+="&batch_time=".concat(I()));var v="".concat(f,"?").concat(l);return d?"".concat(d,"?ddforward=").concat(encodeURIComponent(v)):v},buildIntakeUrl:function(){return d?"".concat(d,"?ddforward"):f},endpointType:t}}var $r=200;function Vr(e){var t=e.env,r=e.service,n=e.version,o=e.datacenter,i=[];return t&&i.push(ye("env",t)),r&&i.push(ye("service",r)),n&&i.push(ye("version",n)),o&&i.push(ye("datacenter",o)),i}var Wr=/[^a-z0-9_:./-]/;function ye(e,t){var r=$r-e.length-1;(t.length>r||Wr.test(t))&&O.warn("".concat(e," value doesn't meet tag requirements and will be sanitized"));var n=t.replace(/,/g,"_");return"".concat(e,":").concat(n)}function Yr(e){var t=Vr(e),r=Jr(e,t),n=Z(r).map(function(i){return i.buildIntakeUrl()}),o=zr(e,n,t);return M({isIntakeUrl:function(i){return n.some(function(s){return i.indexOf(s)===0})},replica:o,site:e.site||xe},r)}function Jr(e,t){return{logsEndpointBuilder:oe(e,"logs",t),rumEndpointBuilder:oe(e,"rum",t),sessionReplayEndpointBuilder:oe(e,"sessionReplay",t)}}function zr(e,t,r){if(!!e.replica){var n=M({},e,{site:xe,clientToken:e.replica.clientToken}),o={logsEndpointBuilder:oe(n,"logs",r),rumEndpointBuilder:oe(n,"rum",r)};return t.push.apply(t,Z(o).map(function(i){return i.buildIntakeUrl()})),M({applicationId:e.replica.applicationId},o)}}function Xr(e){var t,r;if(!e||!e.clientToken){O.error("Client Token is not configured, we will not send any data.");return}if(e.sampleRate!==void 0&&!ot(e.sampleRate)){O.error("Sample Rate should be a number between 0 and 100");return}if(e.telemetrySampleRate!==void 0&&!ot(e.telemetrySampleRate)){O.error("Telemetry Sample Rate should be a number between 0 and 100");return}return xr(e.enableExperimentalFeatures),M({beforeSend:e.beforeSend&&ht(e.beforeSend,"beforeSend threw an error:"),cookieOptions:qr(e),sampleRate:(t=e.sampleRate)!==null&&t!==void 0?t:100,telemetrySampleRate:(r=e.telemetrySampleRate)!==null&&r!==void 0?r:20,service:e.service,silentMultipleInit:!!e.silentMultipleInit,batchBytesLimit:mt("lower-batch-size")?10*de:16*de,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:30*X,batchMessagesLimit:50,messageBytesLimit:256*de},Yr(e))}function qr(e){var t={};return t.secure=Qr(e),t.crossSite=!!e.useCrossSiteSessionCookie,e.trackSessionAcrossSubdomains&&(t.domain=Pr()),t}function Qr(e){return!!e.useSecureSessionCookie||!!e.useCrossSiteSessionCookie}function Zr(e){return pr(function(t,r){var n=mr(t,r,"Uncaught"),o=n.stack,i=n.message,s=n.type;e.notify({message:i,stack:o,type:s,source:T.SOURCE,startClocks:me(),originalError:r,handling:"unhandled"})})}function en(e){var t=M({version:"4.11.1",onReady:function(r){r()}},e);return Object.defineProperty(t,"_setDebug",{get:function(){return Ur},enumerable:!1}),t}function tn(e,t,r){var n=e[t];e[t]=r,n&&n.q&&n.q.forEach(function(o){return ht(o,"onReady callback threw an error:")()})}var x={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function rn(e){var t=[];Q(e,x.cspViolation)&&t.push(on());var r=e.filter(function(n){return n!==x.cspViolation});return r.length&&t.push(nn(r)),ct.apply(void 0,t)}function nn(e){var t=new C(function(){if(!!window.ReportingObserver){var r=m(function(o){return o.forEach(function(i){t.notify(sn(i))})}),n=new window.ReportingObserver(r,{types:e,buffered:!0});return n.observe(),function(){n.disconnect()}}});return t}function on(){var e=new C(function(){var t=m(function(n){e.notify(an(n))}),r=ee(document,"securitypolicyviolation",t).stop;return r});return e}function sn(e){var t=e.type,r=e.body;return{type:t,subtype:r.id,message:"".concat(t,": ").concat(r.message),stack:Et(r.id,r.message,r.sourceFile,r.lineNumber,r.columnNumber)}}function an(e){var t=x.cspViolation,r="'".concat(e.blockedURI,"' blocked by '").concat(e.effectiveDirective,"' directive");return{type:x.cspViolation,subtype:e.effectiveDirective,message:"".concat(t,": ").concat(r),stack:Et(e.effectiveDirective,"".concat(r,' of the policy "').concat(ar(e.originalPolicy,100,"..."),'"'),e.sourceFile,e.lineNumber,e.columnNumber)}}function Et(e,t,r,n,o){return r&&Y({name:e,message:t,stack:[{func:"?",url:r,line:n,column:o}]})}var ge=1/0,cn=q,un=function(){function e(t){var r=this;this.expireDelay=t,this.entries=[],this.clearOldContextsInterval=setInterval(function(){return r.clearOldContexts()},cn)}return e.prototype.add=function(t,r){var n=this,o={context:t,startTime:r,endTime:ge,remove:function(){var i=n.entries.indexOf(o);i>=0&&n.entries.splice(i,1)},close:function(i){o.endTime=i}};return this.entries.unshift(o),o},e.prototype.find=function(t){t===void 0&&(t=ge);for(var r=0,n=this.entries;r<n.length;r++){var o=n[r];if(o.startTime<=t){if(t<=o.endTime)return o.context;break}}},e.prototype.closeActive=function(t){var r=this.entries[0];r&&r.endTime===ge&&r.close(t)},e.prototype.findAll=function(t){return t===void 0&&(t=ge),this.entries.filter(function(r){return r.startTime<=t&&t<=r.endTime}).map(function(r){return r.context})},e.prototype.reset=function(){this.entries=[]},e.prototype.stop=function(){clearInterval(this.clearOldContextsInterval)},e.prototype.clearOldContexts=function(){for(var t=te()-this.expireDelay;this.entries.length>0&&this.entries[this.entries.length-1].endTime<t;)this.entries.pop()},e}();function ln(){return!!window.chrome||/HeadlessChrome/.test(window.navigator.userAgent)}var yt=4*Xt,gt=15*q,Ot=/^([a-z]+)=([a-z0-9-]+)$/,ke="&",Oe="_dd_s",fn=10,dn=100,bt=[],be;function ie(e,t){var r;if(t===void 0&&(t=0),be||(be=e),e!==be){bt.push(e);return}if(t>=dn){_t();return}var n,o=se();if(je()){if(o.lock){_e(e,t);return}if(n=K(),o.lock=n,Ge(o,e.options),o=se(),o.lock!==n){_e(e,t);return}}var i=e.process(o);if(je()&&(o=se(),o.lock!==n)){_e(e,t);return}if(i&&Rt(i,e.options),je()&&!(i&&Tt(i))){if(o=se(),o.lock!==n){_e(e,t);return}delete o.lock,Ge(o,e.options),i=o}(r=e.after)===null||r===void 0||r.call(e,i||o),_t()}function je(){return ln()}function _e(e,t){setTimeout(m(function(){ie(e,t+1)}),fn)}function _t(){be=void 0;var e=bt.shift();e&&ie(e)}function Rt(e,t){if(Tt(e)){hn(t);return}e.expire=String(Date.now()+gt),Ge(e,t)}function Ge(e,t){re(Oe,pn(e),gt,t)}function pn(e){return tr(e).map(function(t){var r=t[0],n=t[1];return"".concat(r,"=").concat(n)}).join(ke)}function se(){var e=F(Oe),t={};return vn(e)&&e.split(ke).forEach(function(r){var n=Ot.exec(r);if(n!==null){var o=n[1],i=n[2];t[o]=i}}),t}function vn(e){return e!==void 0&&(e.indexOf(ke)!==-1||Ot.test(e))}function Tt(e){return rr(e)}function hn(e){re(Oe,"",0,e)}var mn="_dd",En="_dd_r",yn="_dd_l",gn="rum",On="logs";function bn(e){var t=F(Oe),r=F(mn),n=F(En),o=F(yn);if(!t){var i={};r&&(i.id=r),o&&/^[01]$/.test(o)&&(i[On]=o),n&&/^[012]$/.test(n)&&(i[gn]=n),Rt(i,e)}}function _n(e,t,r){var n=new C,o=new C,i=setInterval(m(f),pt),s=w();function a(){var p;ie({options:e,process:function(U){var B=d(U);return p=l(B),B},after:function(U){p&&!v()&&k(U),s=U}})}function c(){ie({options:e,process:function(p){return v()?d(p):void 0}})}function f(){ie({options:e,process:function(p){return A(p)?void 0:{}},after:d})}function d(p){return A(p)||(p={}),v()&&(b(p)?g():s=p),p}function l(p){var U=r(p[t]),B=U.trackingType,N=U.isTracked;return p[t]=B,N&&!p.id&&(p.id=K(),p.created=String(Date.now())),N}function v(){return s[t]!==void 0}function b(p){return s.id!==p.id||s[t]!==p[t]}function g(){s={},o.notify()}function k(p){s=p,n.notify()}function w(){var p=se();return A(p)?p:{}}function A(p){return(p.created===void 0||Date.now()-Number(p.created)<yt)&&(p.expire===void 0||Date.now()<Number(p.expire))}return{expandOrRenewSession:qt(m(a),pt).throttled,expandSession:c,getSession:function(){return s},renewObservable:n,expireObservable:o,stop:function(){clearInterval(i)}}}var Rn=q,Tn=yt;function Sn(e,t,r){bn(e);var n=_n(e,t,r),o=new un(Tn);n.renewObservable.subscribe(function(){o.add(i(),te())}),n.expireObservable.subscribe(function(){o.closeActive(te())}),n.expandOrRenewSession(),o.add(i(),gr().relative),wn(function(){return n.expandOrRenewSession()}),Ln(function(){return n.expandSession()});function i(){return{id:n.getSession().id,trackingType:n.getSession()[t]}}return{findActiveSession:function(s){return o.find(s)},renewObservable:n.renewObservable,expireObservable:n.expireObservable}}function wn(e){it(window,["click","touchstart","keydown","scroll"],e,{capture:!0,passive:!0}).stop}function Ln(e){var t=m(function(){document.visibilityState==="visible"&&e()});ee(document,"visibilitychange",t).stop,setInterval(t,Rn)}var Dn="datadog-browser-sdk-failed-send-beacon";function Mn(e,t,r){if(!!mt("lower-batch-size")){var n={reason:r,endpointType:e,version:"4.11.1",connection:navigator.connection?navigator.connection.effectiveType:void 0,onLine:navigator.onLine,size:t};r==="before_unload"||r==="visibility_hidden"?window.localStorage.setItem("".concat(Dn,"-").concat(K()),JSON.stringify(n)):Lr("failed sendBeacon",n)}}var Un=function(){function e(t,r){this.endpointBuilder=t,this.bytesLimit=r}return e.prototype.send=function(t,r,n){var o=this.endpointBuilder.build(),i=!!navigator.sendBeacon&&r<this.bytesLimit;if(i)try{var s=navigator.sendBeacon(o,t);if(s)return;Mn(this.endpointBuilder.endpointType,r,n)}catch(c){An(c)}var a=new XMLHttpRequest;a.open("POST",o,!0),a.send(t)},e}(),St=!1;function An(e){St||(St=!0,ft(e))}var Nn=/[^\u0000-\u007F]/,Cn=function(){function e(t,r,n,o,i,s){s===void 0&&(s=rt),this.request=t,this.batchMessagesLimit=r,this.batchBytesLimit=n,this.messageBytesLimit=o,this.flushTimeout=i,this.beforeUnloadCallback=s,this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesCount=0,this.bufferMessagesCount=0,this.flushOnVisibilityHidden(),this.flushPeriodically()}return e.prototype.add=function(t){this.addOrUpdate(t)},e.prototype.upsert=function(t,r){this.addOrUpdate(t,r)},e.prototype.flush=function(t){if(this.bufferMessagesCount!==0){var r=this.pushOnlyBuffer.concat(Z(this.upsertBuffer));this.request.send(r.join(`
`),this.bufferBytesCount,t),this.pushOnlyBuffer=[],this.upsertBuffer={},this.bufferBytesCount=0,this.bufferMessagesCount=0}},e.prototype.computeBytesCount=function(t){return Nn.test(t)?window.TextEncoder!==void 0?new TextEncoder().encode(t).length:new Blob([t]).size:t.length},e.prototype.addOrUpdate=function(t,r){var n=this.process(t),o=n.processedMessage,i=n.messageBytesCount;if(i>=this.messageBytesLimit){O.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(this.messageBytesLimit,"KB."));return}this.hasMessageFor(r)&&this.remove(r),this.willReachedBytesLimitWith(i)&&this.flush("batch_bytes_limit"),this.push(o,i,r),this.isFull()&&this.flush("batch_messages_limit")},e.prototype.process=function(t){var r=pe(t),n=this.computeBytesCount(r);return{processedMessage:r,messageBytesCount:n}},e.prototype.push=function(t,r,n){this.bufferMessagesCount>0&&(this.bufferBytesCount+=1),n!==void 0?this.upsertBuffer[n]=t:this.pushOnlyBuffer.push(t),this.bufferBytesCount+=r,this.bufferMessagesCount+=1},e.prototype.remove=function(t){var r=this.upsertBuffer[t];delete this.upsertBuffer[t];var n=this.computeBytesCount(r);this.bufferBytesCount-=n,this.bufferMessagesCount-=1,this.bufferMessagesCount>0&&(this.bufferBytesCount-=1)},e.prototype.hasMessageFor=function(t){return t!==void 0&&this.upsertBuffer[t]!==void 0},e.prototype.willReachedBytesLimitWith=function(t){return this.bufferBytesCount+t+1>=this.batchBytesLimit},e.prototype.isFull=function(){return this.bufferMessagesCount===this.batchMessagesLimit||this.bufferBytesCount>=this.batchBytesLimit},e.prototype.flushPeriodically=function(){var t=this;setTimeout(m(function(){t.flush("batch_flush_timeout"),t.flushPeriodically()}),this.flushTimeout)},e.prototype.flushOnVisibilityHidden=function(){var t=this;navigator.sendBeacon&&(ee(window,"beforeunload",this.beforeUnloadCallback),ee(document,"visibilitychange",function(){document.visibilityState==="hidden"&&t.flush("visibility_hidden")}),ee(window,"beforeunload",function(){return t.flush("before_unload")}))},e}();function Ke(){var e=In();if(!!e)return{getAllowedWebViewHosts:function(){return JSON.parse(e.getAllowedWebViewHosts())},send:function(t,r){e.send(JSON.stringify({eventType:t,event:r}))}}}function Re(e){var t;e===void 0&&(e=(t=Ue().location)===null||t===void 0?void 0:t.hostname);var r=Ke();return!!r&&r.getAllowedWebViewHosts().some(function(n){var o=n.replace(/\./g,"\\."),i=new RegExp("^(.+\\.)*".concat(o,"$"));return i.test(e)})}function In(){return Ue().DatadogEventBridge}function wt(e,t,r){var n=i(t),o;r&&(o=i(r));function i(s){return new Cn(new Un(s,e.batchBytesLimit),e.batchMessagesLimit,e.batchBytesLimit,e.messageBytesLimit,e.flushTimeout)}return{add:function(s,a){a===void 0&&(a=!0),n.add(s),o&&a&&o.add(s)}}}function Bn(e,t,r){var n=0,o=!1;return{isLimitReached:function(){if(n===0&&setTimeout(function(){n=0},q),n+=1,n<=t||o)return o=!1,!1;if(n===t+1){o=!0;try{r({message:"Reached max number of ".concat(e,"s by minute: ").concat(t),source:T.AGENT,startClocks:me()})}finally{o=!1}}return!0}}}var He,Fe=new WeakMap;function Pn(){return He||(He=xn()),He}function xn(){var e=new C(function(){var t=W(XMLHttpRequest.prototype,"open",{before:kn}).stop,r=W(XMLHttpRequest.prototype,"send",{before:function(){jn.call(this,e)}}).stop,n=W(XMLHttpRequest.prototype,"abort",{before:Gn}).stop;return function(){t(),r(),n()}});return e}function kn(e,t){Fe.set(this,{state:"open",method:e,url:Pe(t.toString())})}function jn(e){var t=this,r=Fe.get(this);if(!!r){var n=r;n.state="start",n.startTime=te(),n.startClocks=me(),n.isAborted=!1,n.xhr=this;var o=!1,i=W(this,"onreadystatechange",{before:function(){this.readyState===XMLHttpRequest.DONE&&s()}}).stop,s=m(function(){if(t.removeEventListener("loadend",s),i(),!o){o=!0;var a=r;a.state="complete",a.duration=ut(n.startClocks.timeStamp,I()),a.status=t.status,e.notify(Qt(a))}});this.addEventListener("loadend",s),e.notify(n)}}function Gn(){var e=Fe.get(this);e&&(e.isAborted=!0)}var $e;function Kn(){return $e||($e=Hn()),$e}function Hn(){var e=new C(function(){if(!!window.fetch){var t=st(window,"fetch",function(r){return function(n,o){var i,s=H(Fn,null,[e,n,o]);return s?(i=r.call(this,s.input,s.init),H($n,null,[e,i,s])):i=r.call(this,n,o),i}}).stop;return t}});return e}function Fn(e,t,r){var n=r&&r.method||typeof t=="object"&&t.method||"GET",o=Pe(typeof t=="object"&&t.url||t),i=me(),s={state:"start",init:r,input:t,method:n,startClocks:i,url:o};return e.notify(s),s}function $n(e,t,r){var n=function(o){var i=r;i.state="complete",i.duration=ut(i.startClocks.timeStamp,I()),"stack"in o||o instanceof Error?(i.status=0,i.isAborted=o instanceof DOMException&&o.code===DOMException.ABORT_ERR,i.error=o,e.notify(i)):"status"in o&&(i.response=o,i.responseType=o.type,i.status=o.status,i.isAborted=!1,e.notify(i))};t.then(m(n),m(n))}var Vn=500,Wn=function(){function e(){this.buffer=[]}return e.prototype.add=function(t){var r=this.buffer.push(t);r>Vn&&this.buffer.splice(0,1)},e.prototype.drain=function(){this.buffer.forEach(function(t){return t()}),this.buffer.length=0},e}();function Lt(){var e={};return{get:function(){return e},add:function(t,r){e[t]=r},remove:function(t){delete e[t]},set:function(t){e=t}}}var Yn=32*de;function Jn(e){var t=Xr(e),r=Dt(e.forwardConsoleLogs,Z(S),"Forward Console Logs"),n=Dt(e.forwardReports,Z(x),"Forward Reports");if(!(!t||!r||!n))return e.forwardErrorsToLogs&&!Q(r,S.error)&&r.push(S.error),M({forwardErrorsToLogs:e.forwardErrorsToLogs!==!1,forwardConsoleLogs:r,forwardReports:n,requestErrorResponseLengthLimit:Yn},t)}function Dt(e,t,r){if(e===void 0)return[];if(!(e==="all"||Array.isArray(e)&&e.every(function(n){return Q(t,n)}))){O.error("".concat(r,' should be "all" or an array with allowed values "').concat(t.join('", "'),'"'));return}return e==="all"?t:fr(e)}var zn=globalThis&&globalThis.__decorate||function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(i=(o<3?s(i):o>3?s(t,r,i):s(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i},E={debug:"debug",error:"error",info:"info",warn:"warn"},Ve={console:"console",http:"http",silent:"silent"},Xn=Object.keys(E),Mt=function(){function e(t,r,n,o,i){n===void 0&&(n=Ve.http),o===void 0&&(o=E.debug),i===void 0&&(i={}),this.handleLogStrategy=t,this.handlerType=n,this.level=o,this.contextManager=Lt(),this.contextManager.set(M({},i,r?{logger:{name:r}}:void 0))}return e.prototype.log=function(t,r,n){n===void 0&&(n=E.info),this.handleLogStrategy({message:t,context:Ae(r),status:n},this)},e.prototype.debug=function(t,r){this.log(t,r,E.debug)},e.prototype.info=function(t,r){this.log(t,r,E.info)},e.prototype.warn=function(t,r){this.log(t,r,E.warn)},e.prototype.error=function(t,r){var n={error:{origin:T.LOGGER}};this.log(t,he(n,r),E.error)},e.prototype.setContext=function(t){this.contextManager.set(t)},e.prototype.getContext=function(){return this.contextManager.get()},e.prototype.addContext=function(t,r){this.contextManager.add(t,r)},e.prototype.removeContext=function(t){this.contextManager.remove(t)},e.prototype.setHandler=function(t){this.handlerType=t},e.prototype.getHandler=function(){return this.handlerType},e.prototype.setLevel=function(t){this.level=t},e.prototype.getLevel=function(){return this.level},zn([wr],e.prototype,"log",null),e}();function qn(e){var t=!1,r=Lt(),n={},o=new Wn,i=function(l,v,b,g){b===void 0&&(b=Ae(c())),g===void 0&&(g=I()),o.add(function(){return i(l,v,b,g)})},s=function(){},a=new Mt(function(){for(var l=[],v=0;v<arguments.length;v++)l[v]=arguments[v];return i.apply(void 0,l)});function c(){return{view:{referrer:document.referrer,url:window.location.href},context:r.get()}}return en({logger:a,init:m(function(l){if(Re()&&(l=f(l)),!!d(l)){var v=Jn(l);!v||(i=e(v,c,a).handleLog,s=function(){return Ae(l)},o.drain(),t=!0)}}),getLoggerGlobalContext:m(r.get),setLoggerGlobalContext:m(r.set),addLoggerGlobalContext:m(r.add),removeLoggerGlobalContext:m(r.remove),createLogger:m(function(l,v){return v===void 0&&(v={}),n[l]=new Mt(function(){for(var b=[],g=0;g<arguments.length;g++)b[g]=arguments[g];return i.apply(void 0,b)},l,v.handler,v.level,v.context),n[l]}),getLogger:m(function(l){return n[l]}),getInitConfiguration:m(function(){return s()})});function f(l){return M({},l,{clientToken:"empty"})}function d(l){return t?(l.silentMultipleInit||O.error("DD_LOGS is already initialized."),!1):!0}}var Qn="logs";function Zn(e){var t=Sn(e.cookieOptions,Qn,function(r){return to(e,r)});return{findTrackedSession:function(r){var n=t.findActiveSession(r);return n&&n.trackingType==="1"?{id:n.id}:void 0}}}function eo(e){var t=Ut(e)==="1",r=t?{}:void 0;return{findTrackedSession:function(){return r}}}function Ut(e){return tt(e.sampleRate)?"1":"0"}function to(e,t){var r=ro(t)?t:Ut(e);return{trackingType:r,isTracked:r==="1"}}function ro(e){return e==="0"||e==="1"}var z,At=(z={},z[E.debug]=0,z[E.info]=1,z[E.warn]=2,z[E.error]=3,z);function no(e){function t(r,n,o,i){var s=r.context;Nt(r.status,Ve.console,n)&&O(r.status,r.message,he(n.getContext(),s)),e.notify(0,{rawLogsEvent:{date:i||I(),message:r.message,status:r.status,origin:T.LOGGER},messageContext:s,savedCommonContext:o,logger:n})}return{handleLog:t}}function Nt(e,t,r){var n=r.getHandler(),o=Array.isArray(n)?n:[n];return At[e]>=At[r.getLevel()]&&Q(o,t)}function oo(e,t){t.notify(0,{rawLogsEvent:{message:e.message,date:e.startClocks.timeStamp,error:{origin:T.AGENT},origin:T.AGENT,status:E.error}})}function io(e,t,r,n,o){var i=Xn.concat(["custom"]),s={};i.forEach(function(a){s[a]=Bn(a,t.eventRateLimiterThreshold,function(c){return oo(c,r)})}),r.subscribe(0,function(a){var c,f,d,l=a.rawLogsEvent,v=a.messageContext,b=v===void 0?void 0:v,g=a.savedCommonContext,k=g===void 0?void 0:g,w=a.logger,A=w===void 0?o:w,p=Or(l.date),U=e.findTrackedSession(p);if(!!U){var B=k||n(),N=he({service:t.service,session_id:U.id,view:B.view},B.context,Te(p),l,A.getContext(),b);!Nt(l.status,Ve.http,A)||((c=t.beforeSend)===null||c===void 0?void 0:c.call(t,N))===!1||((f=N.error)===null||f===void 0?void 0:f.origin)!==T.AGENT&&((d=s[N.status])!==null&&d!==void 0?d:s.custom).isLimitReached()||r.notify(1,N)}})}function Te(e){var t=window.DD_RUM;return t&&t.getInternalContext?t.getInternalContext(e):void 0}var $,so=($={},$[S.log]=E.info,$[S.debug]=E.debug,$[S.info]=E.info,$[S.warn]=E.warn,$[S.error]=E.error,$);function ao(e,t){var r=Ar(e.forwardConsoleLogs).subscribe(function(n){t.notify(0,{rawLogsEvent:{date:I(),message:n.message,origin:T.CONSOLE,error:n.api===S.error?{origin:T.CONSOLE,stack:n.stack}:void 0,status:so[n.api]}})});return{stop:function(){r.unsubscribe()}}}var ae,co=(ae={},ae[x.cspViolation]=E.error,ae[x.intervention]=E.error,ae[x.deprecation]=E.warn,ae);function uo(e,t){var r=rn(e.forwardReports).subscribe(function(n){var o=n.message,i=co[n.type],s;i===E.error?s={kind:n.subtype,origin:T.REPORT,stack:n.stack}:n.stack&&(o+=" Found in ".concat(Er(n.stack))),t.notify(0,{rawLogsEvent:{date:I(),message:o,origin:T.REPORT,error:s,status:i}})});return{stop:function(){r.unsubscribe()}}}function lo(e,t){var r=Pn().subscribe(function(i){i.state==="complete"&&o("xhr",i)}),n=Kn().subscribe(function(i){i.state==="complete"&&o("fetch",i)});function o(i,s){!e.isIntakeUrl(s.url)&&(ho(s)||mo(s))&&("xhr"in s?fo(s.xhr,e,a):s.response?vo(s.response,e,a):s.error&&po(s.error,e,a));function a(c){t.notify(0,{rawLogsEvent:{message:"".concat(Eo(i)," error ").concat(s.method," ").concat(s.url),date:s.startClocks.timeStamp,error:{origin:T.NETWORK,stack:c||"Failed to load"},http:{method:s.method,status_code:s.status,url:s.url},status:E.error,origin:T.NETWORK}})}}return{stop:function(){r.unsubscribe(),n.unsubscribe()}}}function fo(e,t,r){typeof e.response=="string"?r(We(e.response,t)):r(e.response)}function po(e,t,r){r(We(Y(G(e)),t))}function vo(e,t,r){window.TextDecoder?e.body?yo(e.clone().body,t.requestErrorResponseLengthLimit,function(n,o){r(n?"Unable to retrieve response: ".concat(n):o)}):r():e.clone().text().then(m(function(n){return r(We(n,t))}),m(function(n){return r("Unable to retrieve response: ".concat(n))}))}function ho(e){return e.status===0&&e.responseType!=="opaque"}function mo(e){return e.status>=500}function We(e,t){return e.length>t.requestErrorResponseLengthLimit?"".concat(e.substring(0,t.requestErrorResponseLengthLimit),"..."):e}function Eo(e){return e==="xhr"?"XHR":"Fetch"}function yo(e,t,r){go(e,t,function(n,o,i){if(n)r(n);else{var s=new TextDecoder().decode(o);i&&(s+="..."),r(void 0,s)}})}function go(e,t,r){var n=e.getReader(),o=[],i=0;s();function s(){n.read().then(m(function(c){if(c.done){a();return}o.push(c.value),i+=c.value.length,i>t?a():s()}),m(function(c){return r(c)}))}function a(){n.cancel().catch(rt);var c;if(o.length===1)c=o[0];else{c=new Uint8Array(i);var f=0;o.forEach(function(d){c.set(d,f),f+=d.length})}r(void 0,c.slice(0,t),c.length>t)}}function Oo(e,t,r){r===void 0&&(r=new C),e.forwardErrorsToLogs&&Zr(r);var n=r.subscribe(function(o){t.notify(0,{rawLogsEvent:{message:o.message,date:o.startClocks.timeStamp,error:{kind:o.type,origin:T.SOURCE,stack:o.stack},origin:T.SOURCE,status:E.error}})});return{stop:function(){n.unsubscribe()}}}var bo=function(){function e(){this.callbacks={}}return e.prototype.notify=function(t,r){var n=this.callbacks[t];n&&n.forEach(function(o){return o(r)})},e.prototype.subscribe=function(t,r){var n=this;return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(r),{unsubscribe:function(){n.callbacks[t]=n.callbacks[t].filter(function(o){return r!==o})}}},e}();function _o(e,t){var r,n=wt(e,e.logsEndpointBuilder,(r=e.replica)===null||r===void 0?void 0:r.logsEndpointBuilder);t.subscribe(1,function(o){n.add(o)})}function Ro(e){var t=Ke();e.subscribe(1,function(r){t.send("log",r)})}function To(e,t,r){var n=new bo,o=So(e);o.setContextProvider(function(){var a,c,f,d,l,v;return{application:{id:(a=Te())===null||a===void 0?void 0:a.application_id},session:{id:(c=s.findTrackedSession())===null||c===void 0?void 0:c.id},view:{id:(d=(f=Te())===null||f===void 0?void 0:f.view)===null||d===void 0?void 0:d.id},action:{id:(v=(l=Te())===null||l===void 0?void 0:l.user_action)===null||v===void 0?void 0:v.id}}}),lo(e,n),Oo(e,n),ao(e,n),uo(e,n);var i=no(n).handleLog,s=Br(e.cookieOptions)&&!Re()?Zn(e):eo(e);return io(s,e,n,t,r),Re()?Ro(n):_o(e,n),{handleLog:i}}function So(e){var t,r=Tr(e);if(Re()){var n=Ke();r.observable.subscribe(function(i){return n.send("internal_telemetry",i)})}else{var o=wt(e,e.rumEndpointBuilder,(t=e.replica)===null||t===void 0?void 0:t.rumEndpointBuilder);r.observable.subscribe(function(i){return o.add(i,Sr(e))})}return r}var Se=qn(To);tn(Ue(),"DD_LOGS",Se);class wo{constructor(t,r,n){_(this,"logLevels",{debug:4,error:1,info:3,off:0,warn:2});_(this,"instance");_(this,"logLevel","info");_(this,"service","federated-core");_(this,"options");_(this,"namespace","browser");Se.init({...n.config,service:t}),Se.logger.setLevel(r),this.options=n,this.service=t,this.logLevel=r,this.instance=Se.logger}log(t,r,n="unknown",o={}){var a;if(this.logLevel==="off"||(a=this.options.filteredLogs)!=null&&a.includes(r))return;const s=typeof r=="object"?JSON.stringify({data:r}):r;this.isLevelEnabled(t)&&this.instance[t](`[${this.namespace}] - ${s}`,{logContext:{componentName:n,...o}})}isLevelEnabled(t){return this.logLevels[this.logLevel]>=this.logLevels[t]}debug(t,r,n){this.log("debug",t,r,n)}error(t,r,n){this.log("error",t,r,n)}info(t,r,n){this.log("info",t,r,n)}warn(t,r,n){this.log("warn",t,r,n)}get level(){return this.logLevel}set level(t){this.logLevel=t}get serviceName(){return this.service}get loggerInstance(){return this.instance}}const Ye=()=>typeof window!="undefined",Lo=e=>e.replace(/\s/g,"-").split("-").map(o=>o.charAt(0).toUpperCase()+o.slice(1)).join("");var y;(function(e){e.NOT_LOADED="NOT_LOADED",e.LOADED="LOADED",e.BOOTSTRAPPING="BOOTSTRAPPING",e.BOOTSTRAPPED="BOOTSTRAPPED",e.NOT_MOUNTED="NOT_MOUNTED",e.MOUNTING="MOUNTING",e.MOUNTED="MOUNTED",e.UPDATING="UPDATING",e.UNMOUNTING="UNMOUNTING",e.UNMOUNT_ERROR="UNMOUNT_ERROR",e.UNMOUNTED="UNMOUNTED",e.UNLOADING="UNLOADING",e.LOAD_ERROR="LOAD_ERROR",e.UPDATE_ERROR="UPDATE_ERROR"})(y||(y={}));var u;(function(e){e.RUNTIME_BEFORE_BOOTSTRAP="federated-core:runtime:before-bootstrap",e.RUNTIME_BOOTSTRAPPED="federated-core:runtime:bootstrapped",e.RUNTIME_BOOTSTRAP_ERROR="federated-core:runtime:bootstrap:error",e.RUNTIME_BEFORE_START="federated-core:runtime:before-start",e.RUNTIME_STARTED="federated-core:runtime:started",e.RUNTIME_START_ERROR="federated-core:runtime:start:error",e.RUNTIME_MODULES_PREFETCH_START="federated-core:runtime:modules:pre-fetch:start",e.RUNTIME_BEFORE_MODULE_PREFETCH="federated-core:runtime:module:before-prefetch",e.RUNTIME_MODULE_PREFETCHED="federated-core:runtime:module:prefetched",e.RUNTIME_MODULE_PREFETCH_ERROR="federated-core:runtime:module:prefetch:error",e.RUNTIME_MODULES_PREFETCHED="federated-core:runtime:modules:pre-fetched",e.RUNTIME_ROUTES_PREFETCH_START="federated-core:runtime:routes:pre-fetch:start",e.RUNTIME_BEFORE_ROUTE_PREFETCH="federated-core:runtime:route:before-prefetch",e.RUNTIME_ROUTE_PREFETCHED="federated-core:runtime:route:prefetched",e.RUNTIME_ROUTES_PREFETCH_ERROR="federated-core:runtime:routes:prefetch:error",e.RUNTIME_ROUTES_PREFETCHED="federated-core:runtime:routes:pre-fetched",e.IMPORT_MAP_OVERRIDES_LOADED="federated-core:import-map-overrides:loaded",e.IMPORT_MAP_OVERRIDES_LOAD_ERROR="federated-core:import-map-overrides:load-error",e.ROUTE_CHANGED="federated-core:route:changed",e.ROUTE_ERROR="federated-core:route:error",e.ROUTE_ALREADY_ACTIVE="federated-core:route:already-active",e.ROUTE_NAVIGATE_TO="federated-core:route:navigate-to",e.POPSTATE_EVENT_FIRED="federated-core:popstate:event-fired",e.POPSTATE_EVENT_ERROR="federated-core:popstate:event-error",e.NATIVE_MODULE_LOADING="federated-core:native-module:loading",e.NATIVE_MODULE_LOADED="federated-core:native-module:loaded",e.NATIVE_MODULE_LOAD_ERROR="federated-core:native-module:load-error",e.SYSTEMJS_LOADED="federated-core:systemjs:loaded",e.SYSTEMJS_LOAD_ERROR="federated-core:systemjs:load-error",e.SYSTEMJS_MODULE_LOADING="federated-core:systemjs:module:loading",e.SYSTEMJS_MODULE_LOADED="federated-core:systemjs:module:loaded",e.MODULE_BEFORE_REGISTER="federated-core:module:%moduleKey%:before-register",e.MODULE_REGISTERED="federated-core:module:%moduleKey%:registered",e.MODULE_ALREADY_REGISTERED="federated-core:module:%moduleKey%:already-registered",e.MODULE_REGISTER_ERROR="federated-core:module:%moduleKey%:register:error",e.MODULE_BEFORE_LOAD="federated-core:module:%moduleKey%:before-load",e.MODULE_LOADED="federated-core:module:%moduleKey%:loaded",e.MODULE_ALREADY_LOADED="federated-core:module:%moduleKey%:already-loaded",e.MODULE_LOAD_ERROR="federated-core:module:%moduleKey%:load:error",e.MODULE_VALIDATE_PROPS="federated-core:module:%moduleKey%:validate-props",e.MODULE_STATE_CHANGED="federated-core:module:%moduleKey%:state-changed",e.MODULE_BEFORE_BOOTSTRAP="federated-core:module:%moduleKey%:before-bootstrap",e.MODULE_BOOTSTRAPPED="federated-core:module:%moduleKey%:bootstrapped",e.MODULE_BOOTSTRAP_ERROR="federated-core:module:%moduleKey%:bootstrap:error",e.MODULE_BEFORE_MOUNT="federated-core:module:%moduleKey%:before-mount",e.MODULE_MOUNTED="federated-core:module:%moduleKey%:mounted",e.MODULE_MOUNT_ERROR="federated-core:module:%moduleKey%:mount:error",e.MODULE_ALREADY_MOUNTED="federated-core:module:%moduleKey%:already-mounted",e.MODULE_BEFORE_UNMOUNT="federated-core:module:%moduleKey%:before-unmount",e.MODULE_UNMOUNTED="federated-core:module:%moduleKey%:unmounted",e.MODULE_UNMOUNT_ERROR="federated-core:module:%moduleKey%:unmount:error",e.MODULE_NOT_MOUNTED="federated-core:module:%moduleKey%:not-mounted",e.MODULE_BEFORE_UPDATE="federated-core:module:%moduleKey%:before-update",e.MODULE_UPDATED="federated-core:module:%moduleKey%:updated",e.MODULE_UPDATE_ERROR="federated-core:module:%moduleKey%:update:error"})(u||(u={}));const Do=(e,t,r)=>{const n=document.createElement(t);n.id=e,Object.keys(r).forEach(o=>{n.setAttribute(o,r[o])}),document.body.appendChild(n)},Mo=(e,t,r)=>{const n=document.createElement("link");n.id=e,n.rel=t,n.href=r,document.head.appendChild(n)},Uo=(e,t,r)=>{if(document.getElementById(e))return;const n=document.createElement("meta");n.id=e,n.content=r,n.name=t,document.head.appendChild(n)},ce=(e,t,r)=>{if(document.getElementById(e))return;const n=document.createElement("script");n.id=e,n.src=t,n.crossOrigin="anonymous",r&&(n.onload=r),document.body.appendChild(n)},D=(e,t)=>`${e}:${t}`,Ao=e=>`^${e.replace(/\*/g,".*")}$`,Ct=(e,t)=>!!t.find(n=>new RegExp(Ao(n)).test(e)),It=(e,t)=>t.activeWhenPaths?Ct(e,t.activeWhenPaths)&&!Ct(e,t.exceptWhenPaths||[]):!1,V=new Map,Je=e=>{const t=V.has(e)?V.get(e):null;if(t){const{type:r,fn:n}=t;window.removeEventListener(r,n),V.delete(e)}},No=(e,t,r)=>{const n=`${e}__${Date.now()}__${Math.floor(Math.random()*1e3)}`;let o=e;return r&&(o=ze(o,r)),V.set(n,{type:o,fn:t}),window.addEventListener(o,t),()=>Je(n)},ze=(e,t)=>e.replace("%moduleKey%",D(t.scope,t.name)),L={register:No,unregister:Je,unregisterAll:()=>{V.forEach((e,t)=>{Je(t)})},emit:(e,t)=>{let r=e.type;t!=null&&t.name&&(r=ze(r,t)),window.dispatchEvent(new CustomEvent(r,e.payload)),window.__FEDERATED_CORE__.federatedRuntime.debugEnabled&&console.log(`[EventService] Emitted event: ${r}`,e.payload)},clear:()=>{V.clear()},replaceModuleKey:ze,eventStore:V},we=new Map,Xe=e=>we.has(e),Co={event:L,logger:{hasLogger:Xe,getLogger:(e,t,r,n=!1)=>{const o=`${e}-logger`;if(Xe(o)&&!n)return we.get(o);const i=new wo(e,t,r);return we.set(o,i),i},deleteLogger:e=>{Xe(e)&&we.delete(e)}}};class qe{constructor(){_(this,"_bootstrapped",!1);_(this,"_started",!1);_(this,"_useNativeModules",!1);_(this,"_importMapOverridesEnabled",!1);_(this,"_debugEnabled",!1);_(this,"_sharedDependencyBaseUrl","");_(this,"_cdnUrl","");_(this,"_modules",new Map);_(this,"_services",Co)}set bootstrapped(t){this._bootstrapped=t}get bootstrapped(){return this._bootstrapped}set started(t){this._started=t}get started(){return this._started}set debugEnabled(t){this._debugEnabled=t}get debugEnabled(){return this._debugEnabled}set sharedDependencyBaseUrl(t){this._sharedDependencyBaseUrl=t}get sharedDependencyBaseUrl(){return this._sharedDependencyBaseUrl}set useNativeModules(t){this._useNativeModules=t}get useNativeModules(){return this._useNativeModules}set importMapOverridesEnabled(t){this._importMapOverridesEnabled=t}get importMapOverridesEnabled(){return this._importMapOverridesEnabled}set cdnUrl(t){this._cdnUrl=t}get cdnUrl(){return this._cdnUrl}set modules(t){this._modules=t}get modules(){return this._modules}get services(){return this._services}addImportMapOverridesUi(){const t="import-map-overrides";this.importMapOverridesEnabled&&(Do("import-map-overrides-ui","import-map-overrides-full",{"show-when-local-storage":t}),localStorage.setItem(t,"true"),ce(t,"https://cdn.jsdelivr.net/npm/import-map-overrides/dist/import-map-overrides.js"),this.services.event.emit({type:u.IMPORT_MAP_OVERRIDES_LOADED,payload:{loadedTime:Date.now()}}))}ensureSystemJs(){this.useNativeModules||(Uo("importmap-type","importmap-type","systemjs-importmap"),ce("systemjs",`${this.sharedDependencyBaseUrl}/systemjs/6.12.1/system.min.js`),ce("systemjs-named-exports",`${this.sharedDependencyBaseUrl}/systemjs/6.12.1/named-exports.min.js`),ce("systemjs-amd",`${this.sharedDependencyBaseUrl}/systemjs/6.12.1/amd.min.js`),ce("systemjs-dynamic-import-maps",`${this.sharedDependencyBaseUrl}/systemjs/6.12.1/dynamic-import-maps.min.js`),this.services.event.emit({type:u.SYSTEMJS_LOADED,payload:{loadedTime:Date.now()}}))}async fetchImportMapContent(t){const r=`${t}/entries-import-map.json`;return(await fetch(r)).json()}addBaseUrl(t,r){return window.__FEDERATED_CORE__.moduleBaseUrls[t]=r,this}setModuleState(t,r){const{scope:n,name:o}=t,i=D(n,o);Array.from(this.modules.entries()).forEach(([s,a])=>{s===i&&(a.status=r,this.modules.set(i,a),this.services.event.emit({type:u.MODULE_STATE_CHANGED,payload:{module:a}},t))})}setModuleRootComponent(t,r){const{scope:n,name:o}=t,i=D(n,o),s=this.modules.get(i);s&&(s.rootComponent=r,this.modules.set(i,s))}getModuleRootComponent(t){const{scope:r,name:n}=t,o=D(r,n),i=this.modules.get(o);if(i)return i.rootComponent}async registerModule(t){var i,s;const{scope:r,name:n}=t,o=D(r,n);return this.modules.has(o)&&((i=this.modules.get(o))==null?void 0:i.status)===y.LOADED?this.services.event.emit({type:u.MODULE_ALREADY_REGISTERED,payload:{module:t}},t):this.modules.has(o)&&((s=this.modules.get(o))==null?void 0:s.status)===y.MOUNTED?this.services.event.emit({type:u.MODULE_ALREADY_MOUNTED,payload:{module:t}},t):(this.services.event.emit({type:u.MODULE_BEFORE_REGISTER,payload:{module:t}},t),this.setModuleState({scope:t.scope,name:t.name},y.NOT_LOADED),this.modules.set(o,t),this.services.event.emit({type:u.MODULE_REGISTERED,payload:{module:t}},t)),this}async getModuleUrl(t){const{scope:r,name:n}=t,o=window.__FEDERATED_CORE__.moduleBaseUrls[r],i=await this.fetchImportMapContent(o),s=D(r,n);return i.imports[s]}getModulesByPath(t){const r=[];return this.modules.forEach(n=>{It(t,n)&&r.push(n)}),r}async loadModule(t){var o,i;const{scope:r,name:n}=t;try{const s=D(r,n);if(this.modules.has(s)){const c=this.modules.get(s);if(c&&["journey-module","component"].includes(c.type)&&((o=this.modules.get(s))==null?void 0:o.status)===y.MOUNTED)return this.services.event.emit({type:u.MODULE_ALREADY_MOUNTED,payload:{module:t}},t),this.modules.get(s);if(c&&((i=this.modules.get(s))==null?void 0:i.status)===y.LOADED)return this.services.event.emit({type:u.MODULE_ALREADY_LOADED,payload:{module:t}},t),this.modules.get(s)}this.services.event.emit({type:u.MODULE_BEFORE_LOAD,payload:{module:t}},t);let a;if(Ye()){const c=window.__FEDERATED_CORE__.moduleBaseUrls[r],d=(await this.fetchImportMapContent(c)).imports[`${n}.css`];d&&Mo(`${n}.css`,"stylesheet",d)}return this.useNativeModules?(this.services.event.emit({type:u.NATIVE_MODULE_LOADING,payload:{module:t}},t),a=await import(await this.getModuleUrl({scope:r,name:n})),this.services.event.emit({type:u.NATIVE_MODULE_LOADED,payload:{loadedTime:new Date().getTime(),module:a}},t)):(this.services.event.emit({type:u.SYSTEMJS_MODULE_LOADING,payload:{module:t}},t),a=await System.import(n),this.services.event.emit({type:u.SYSTEMJS_MODULE_LOADED,payload:{module:a}},t)),!this.modules.has(s)&&!a.status&&await this.registerModule(a),(!a.status||a.status===y.NOT_LOADED)&&this.setModuleState({scope:r,name:n},y.LOADED),a}catch(s){this.services.event.emit({type:u.MODULE_LOAD_ERROR,payload:{module:t,error:s}},t);return}}async mountModule(t,r,n){const{scope:o,name:i}=t,s=await this.loadModule({scope:o,name:i});s!=null&&s.mount&&await s.mount(r,n)}async unmountModule(t){const{scope:r,name:n}=t,o=await this.modules.get(D(r,n));o!=null&&o.unmount&&await o.unmount()}validateProps(t,r){const{scope:n,name:o}=t,i=D(n,o);this.services.event.emit({type:u.MODULE_VALIDATE_PROPS,payload:{module:t,props:r}},t);const s=this.modules.get(i);return s!=null&&s.validateProps?s.validateProps(r):!0}async preFetchModules(t){this.services.event.emit({type:u.RUNTIME_MODULES_PREFETCH_START,payload:{modules:t}});for(const r of t){const{name:n,scope:o}=r,i=D(o,n);this.modules.has(i)||(this.services.event.emit({type:u.RUNTIME_BEFORE_MODULE_PREFETCH,payload:{module:r}}),await this.loadModule({scope:o,name:n}),this.services.event.emit({type:u.RUNTIME_MODULE_PREFETCHED,payload:{module:r}}))}return this.services.event.emit({type:u.RUNTIME_MODULES_PREFETCHED,payload:{modules:t}}),this}async applyModules(){const t=[],r=[];this.modules.forEach(n=>{It(window.location.pathname,n)?t.push(n):r.push(n)});for(const n of r){const o=D(n.scope,n.name),i=this.modules.get(o);i!=null&&i.unmount?(this.services.event.emit({type:u.MODULE_BEFORE_UNMOUNT,payload:{module:n}},n),await i.unmount(),this.services.event.emit({type:u.MODULE_UNMOUNTED,payload:{module:i}},n)):((i==null?void 0:i.type)==="journey-module"||(i==null?void 0:i.type)==="component")&&this.setModuleState({scope:n.scope,name:n.name},y.NOT_LOADED)}for(const n of t)try{const{scope:o,name:i}=n,s=await this.loadModule({scope:o,name:i});s!=null&&s.mount&&(this.services.event.emit({type:u.MODULE_BEFORE_MOUNT,payload:{module:s}},n),await s.mount(),this.services.event.emit({type:u.MODULE_MOUNTED,payload:{module:s}},n))}catch(o){this.services.event.emit({type:u.MODULE_MOUNT_ERROR,payload:{module:n,error:o}},n)}}navigateTo(t){if(window.location.pathname===t){this.services.event.emit({type:u.ROUTE_ALREADY_ACTIVE,payload:{path:t}});return}this.services.event.emit({type:u.ROUTE_NAVIGATE_TO,payload:{previousPath:window.location.pathname,path:t}}),window.history.pushState(null,"",t),window.dispatchEvent(new PopStateEvent("popstate"))}async reroute(){this.services.event.emit({type:u.ROUTE_CHANGED,payload:{path:window.location.pathname}}),await this.applyModules()}async preFetchRoutes(t){try{this.services.event.emit({type:u.RUNTIME_ROUTES_PREFETCH_START,payload:{routes:t}}),t.forEach(r=>{this.services.event.emit({type:u.RUNTIME_BEFORE_ROUTE_PREFETCH,payload:{path:r}}),this.getModulesByPath(r).forEach(async o=>{const{name:i,scope:s}=o;(o==null?void 0:o.status)!==y.LOADED&&await this.loadModule({scope:s,name:i})}),this.services.event.emit({type:u.RUNTIME_ROUTE_PREFETCHED,payload:{path:r}})}),this.services.event.emit({type:u.RUNTIME_ROUTES_PREFETCHED,payload:{routes:t}})}catch(r){this.services.event.emit({type:u.RUNTIME_ROUTES_PREFETCH_ERROR,payload:{routes:t,error:r}})}return this}async bootstrap(){this.bootstrapped=!1;const t=Date.now();this.services.event.emit({type:u.RUNTIME_BEFORE_BOOTSTRAP,payload:{bootstrapTime:new Date().toDateString(),modules:this.modules,modulesBaseUrls:window.__FEDERATED_CORE__.moduleBaseUrls,useNativeModules:this.useNativeModules,importMapOverridesEnabled:this.importMapOverridesEnabled}}),window.addEventListener("popstate",async o=>{this.services.event.emit({type:u.POPSTATE_EVENT_FIRED,payload:{popstateEvent:o}}),await this.reroute()}),this.ensureSystemJs(),this.addImportMapOverridesUi();for(const o of this.modules){const i=o[1];try{i.bootstrap&&(this.services.event.emit({type:u.MODULE_BEFORE_BOOTSTRAP,payload:{module:i}},i),await i.bootstrap(),this.services.event.emit({type:u.MODULE_BOOTSTRAPPED,payload:{module:i}},i))}catch(s){this.services.event.emit({type:u.MODULE_BOOTSTRAP_ERROR,payload:{module:i,error:s}},i)}}const r=Date.now(),n=r-t;this.bootstrapped=!0,this.services.event.emit({type:u.RUNTIME_BOOTSTRAPPED,payload:{bootstrapEndTime:r,bootstrapDuration:n}})}async start(){try{const t=Date.now();this.started=!1,this.services.event.emit({type:u.RUNTIME_BEFORE_START,payload:{startTime:new Date(t).toDateString(),modules:this.modules}}),await this.bootstrap(),await this.reroute();const r=Date.now(),n=r-t;this.services.event.emit({type:u.RUNTIME_STARTED,payload:{startTime:t,startEndTime:r,startDuration:n}}),this.started=!0}catch(t){this.services.event.emit({type:u.RUNTIME_START_ERROR,payload:{error:t}})}}}const Io=()=>Ye()?(window.__FEDERATED_CORE__.federatedRuntime||(window.__FEDERATED_CORE__.federatedRuntime=new qe),window.__FEDERATED_CORE__.federatedRuntime):new qe;Ye()&&!window.__FEDERATED_CORE__&&(window.__FEDERATED_CORE__={moduleBaseUrls:{},federatedRuntime:new qe});var Le={exports:{}},ue={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var Bt=Object.getOwnPropertySymbols,Bo=Object.prototype.hasOwnProperty,Po=Object.prototype.propertyIsEnumerable;function xo(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function ko(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(n.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(i){o[i]=i}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}ko();/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jo=et.default,Pt=60103;if(ue.Fragment=60107,typeof Symbol=="function"&&Symbol.for){var xt=Symbol.for;Pt=xt("react.element"),ue.Fragment=xt("react.fragment")}var Go=jo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ko=Object.prototype.hasOwnProperty,Ho={key:!0,ref:!0,__self:!0,__source:!0};function kt(e,t,r){var n,o={},i=null,s=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(s=t.ref);for(n in t)Ko.call(t,n)&&!Ho.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)o[n]===void 0&&(o[n]=t[n]);return{$$typeof:Pt,type:e,key:i,ref:s,props:o,_owner:Go.current}}ue.jsx=kt,ue.jsxs=kt,Le.exports=ue;const le=Le.exports.jsx,Fo=Le.exports.jsxs,$o=Le.exports.Fragment,Vo=async(e,t)=>{try{L.emit({type:u.MODULE_BEFORE_BOOTSTRAP,payload:{module:e}},e),t==null||t.setModuleState(e,y.BOOTSTRAPPING),L.emit({type:u.MODULE_BOOTSTRAPPED,payload:{module:e}},e),t==null||t.setModuleState(e,y.BOOTSTRAPPED)}catch(r){L.emit({type:u.MODULE_BOOTSTRAP_ERROR,payload:{module:e,error:r}},e)}};function Qe(e,t){return Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,o){return n.__proto__=o,n},Qe(e,t)}function Wo(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Qe(e,t)}var Yo=function(t,r){return t===void 0&&(t=[]),r===void 0&&(r=[]),t.length!==r.length||t.some(function(n,o){return!Object.is(n,r[o])})},jt={error:null},Jo=function(e){Wo(t,e);function t(){for(var n,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return n=e.call.apply(e,[this].concat(i))||this,n.state=jt,n.resetErrorBoundary=function(){for(var a,c=arguments.length,f=new Array(c),d=0;d<c;d++)f[d]=arguments[d];n.props.onReset==null||(a=n.props).onReset.apply(a,f),n.reset()},n}t.getDerivedStateFromError=function(o){return{error:o}};var r=t.prototype;return r.reset=function(){this.setState(jt)},r.componentDidCatch=function(o,i){var s,a;(s=(a=this.props).onError)==null||s.call(a,o,i)},r.componentDidUpdate=function(o,i){var s=this.state.error,a=this.props.resetKeys;if(s!==null&&i.error!==null&&Yo(o.resetKeys,a)){var c,f;(c=(f=this.props).onResetKeysChange)==null||c.call(f,o.resetKeys,a),this.reset()}},r.render=function(){var o=this.state.error,i=this.props,s=i.fallbackRender,a=i.FallbackComponent,c=i.fallback;if(o!==null){var f={error:o,resetErrorBoundary:this.resetErrorBoundary};if(De.isValidElement(c))return c;if(typeof s=="function")return s(f);if(a)return De.createElement(a,f);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(De.Component);function zo(e){const t=r=>le(Jo,{fallbackRender:({error:n})=>e.config.errorBoundary?e.config.errorBoundary(n):Fo("div",{children:[le("h1",{children:"Something went wrong"}),le("p",{children:n.message})]}),children:r.children});return t.displayName=`WithErrorBoundary${Lo(e.config.name)}`,t}const Xo=(e,t,r)=>{const n=typeof e.renderType=="function"?e.renderType():e.renderType||"render",o=r.innerHTML!=="";return n==="hydrate"||o?e.ReactDOM.hydrate(t,r):e.ReactDOM.render(t,r),null},qo=(e,t,r,n)=>{const o=`${e.scope}-${e.name}`;return async(i=n,s)=>{const{React:a,config:{scope:c,name:f,domElementId:d}}=r;let{rootComponent:l}=r.config;const v=D(c,f),b=t.modules.get(v),g=s||d||o,k=document.getElementById(g);k||L.emit({type:u.MODULE_MOUNT_ERROR,payload:{module:e,error:new Error(`Could not find dom container with id ${d}`)}},e),b!=null&&b.bootstrap&&await b.bootstrap(),l=l||t.getModuleRootComponent(e);try{t==null||t.setModuleState(e,y.MOUNTING);const w=i||n;t==null||t.validateProps(e,w);let A,p=!1;if(r.config.loadRootComponent&&(A=await r.config.loadRootComponent(),l=A,t.setModuleRootComponent(e,l),p=!0),l){const U=a.createElement(l,w),B=zo(r);let N=a.createElement(B,{},U);p&&(N=a.createElement(R.Suspense,{fallback:a.createElement("div",null,"Loading...")},N)),L.emit({type:u.MODULE_BEFORE_MOUNT,payload:{module:e}},e),k&&Xo(r,N,k),L.emit({type:u.MODULE_MOUNTED,payload:{module:e}},e),t==null||t.setModuleState({scope:c,name:f},y.MOUNTED)}}catch(w){L.emit({type:u.MODULE_MOUNT_ERROR,payload:{module:e,error:w}},e),t==null||t.setModuleState({scope:c,name:f},y.LOAD_ERROR)}}},Qo=(e,t,r)=>{try{const{ReactDOM:n}=r;t==null||t.setModuleState(e,y.UNMOUNTING);const o=r.config.domElementId||`${e.scope}-${e.name}`,i=document.getElementById(o);i&&(n.unmountComponentAtNode(i),L.emit({type:u.MODULE_UNMOUNTED,payload:{module:e}},e),t==null||t.setModuleState(e,y.UNMOUNTED))}catch(n){L.emit({type:u.MODULE_UNMOUNT_ERROR,payload:{module:e,error:n}},e),t==null||t.setModuleState(e,y.UNMOUNT_ERROR)}},Zo=(e,t,r)=>async n=>{try{t==null||t.setModuleState(e,y.UPDATING);const o=n||r.config.defaultProps,i=D(e.scope,e.name),s=t.modules.get(i);if(L.emit({type:u.MODULE_BEFORE_UPDATE,payload:{module:e}},e),!s){L.emit({type:u.MODULE_UPDATE_ERROR,payload:{module:e,error:new Error(`Could not find module with key ${i}`)}},e);return}s!=null&&s.unmount&&await s.unmount(),s!=null&&s.mount&&await s.mount(o),L.emit({type:u.MODULE_UPDATED,payload:{module:e}},e)}catch(o){L.emit({type:u.MODULE_UPDATE_ERROR,payload:{module:e,error:o}},e),t==null||t.setModuleState(e,y.UPDATE_ERROR)}};function ei(e){if(!e.config)throw new Error("Missing config");if(!e.React)throw new Error("Missing React");if(!e.ReactDOM)throw new Error("Missing ReactDOM");if(!e.config.name)throw new Error("Missing name");if(!e.config.scope)throw new Error("Missing scope");if(!e.config.rootComponent&&!e.config.loadRootComponent)throw new Error("Missing rootComponent or loadRootComponent");if(e.config.rootComponent&&e.config.loadRootComponent)throw new Error("Cannot have both rootComponent and loadRootComponent")}function ti(e){ei(e);const{federatedRuntime:t,config:r}=e,{rootComponent:n}=r,{domElementId:o=`${r.scope}-${r.name}`,loadRootComponent:i,defaultProps:s,name:a,scope:c,type:f,description:d,propValidationFunction:l,activeWhenPaths:v,exceptWhenPaths:b}=r,g={scope:c,name:a};return{domElementId:o,rootComponent:n,loadRootComponent:i,activeWhenPaths:v||[],exceptWhenPaths:b||[],description:d,name:a,scope:c,type:f,validateProps:w=>l?l(w):!0,...{bootstrap:()=>Vo(g,t),mount:(w,A)=>qo(g,t,e,s)(w,A),unmount:async()=>Qo(g,t,e),update:async w=>Zo(g,t,e)(w)}}}const ri=()=>le($o,{children:le("h1",{children:"Hello"})});var{name:ni,scope:oi,mount:ii,unmount:si,bootstrap:ai,update:ci,exceptWhenPaths:ui,activeWhenPaths:li,type:fi,domElementId:di,status:pi,rootComponent:vi}=ti({React:et.default,ReactDOM:Kt.default,federatedRuntime:Io(),config:{scope:"vfuk-federated-journey-example",name:"ReactFederatedJourney",type:"journey-module",activeWhenPaths:["/","/mixed"],exceptWhenPaths:["/asasd"],domElementId:"root",rootComponent:ri}});h.activeWhenPaths=li,h.bootstrap=ai,h.domElementId=di,h.exceptWhenPaths=ui,h.mount=ii,h.name=ni,h.rootComponent=vi,h.scope=oi,h.status=pi,h.type=fi,h.unmount=si,h.update=ci,Object.defineProperties(h,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
